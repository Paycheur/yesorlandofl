!function(e){"use strict";function a(){var a=l.clientHeight,i=e.innerHeight;return i>a?i:a}function i(){return e.pageYOffset||l.scrollTop}function t(e){var a=0,i=0;do isNaN(e.offsetTop)||(a+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft);while(e=e.offsetParent);return{top:a,left:i}}function n(e,n){var o=e.offsetHeight,s=i(),l=s+a(),d=t(e).top,r=d+o,n=n||0;return l>=d+o*n&&r>=s}function o(e,a){for(var i in a)a.hasOwnProperty(i)&&(e[i]=a[i]);return e}function s(e,a){this.el=e,this.options=o(this.defaults,a),this._init()}var l=e.document.documentElement;s.prototype={defaults:{viewportFactor:.2},_init:function(){if(!Modernizr.touch){this.sections=Array.prototype.slice.call(this.el.querySelectorAll(".cbp-so-section")),this.didScroll=!1;var a=this;this.sections.forEach(function(e){n(e)||classie.add(e,"cbp-so-init")});var i=function(){a.didScroll||(a.didScroll=!0,setTimeout(function(){a._scrollPage()},60))},t=function(){function e(){a._scrollPage(),a.resizeTimeout=null}a.resizeTimeout&&clearTimeout(a.resizeTimeout),a.resizeTimeout=setTimeout(e,200)};e.addEventListener("scroll",i,!1),e.addEventListener("resize",t,!1)}},_scrollPage:function(){var e=this;this.sections.forEach(function(a){n(a,e.options.viewportFactor)?classie.add(a,"cbp-so-animate"):(classie.add(a,"cbp-so-init"),classie.remove(a,"cbp-so-animate"))}),this.didScroll=!1}},e.cbpScroller=s}(window);